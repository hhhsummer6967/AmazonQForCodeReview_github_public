## 1. 输出语言
- 所有代码审核结果，以中文输出。

## 2. 特定场景检查点

### 2.1 并发控制规范

- 在使用并发集合时，注意线程安全性和并发性能，如ConcurrentHashMap是线程安全的，HashMap是非线程安全的
- 乐观锁、悲观锁防止数据库并发。乐观锁一般用版本号version控制，悲观锁一般用select ...for update
- 单实例的多线程并发处理，一般通过Java锁机制，比如synchronized、ReentrantLock
- 同一集群的多线程并发处理，可以用Redis分布式锁或者zookeeper
- 跨集群的多线程并发处理，则考虑数据库实现的分布式锁
- 使用分布式锁时，注意潜在问题，如Redis的一些经典问题

### 2.2 事务控制规范

- 推荐使用编程式事务，而非@Transactional注解的声明式事务
- 事务范围要明确，数据库操作必须在事务作用范围内
- 非数据库操作尽量不要包含在事务内
- 不要在事务内进行远程调用（可能导致数据不一致）
- 事务中避免处理太多数据，查询相关操作尽量放到事务之外

### 2.3 幂等处理规范

- 接口设计考虑幂等性
- 实现幂等的常见方法：唯一索引、状态机、分布式锁、token机制等
- 对关键业务操作实现幂等处理
- 幂等实现要考虑并发情况

### 2.4 远程调用规范

- 不要把超时当作失败处理，应发起查询确认是否成功
- 异常处理：捕获并处理远程调用可能抛出的异常
- 网络安全：考虑数据加密、认证、访问控制等
- 服务质量：避免过度使用远程调用、优化数据传输、实现负载均衡等
- 版本兼容：注意服务端和客户端之间的版本兼容性
- 尽量避免for循环远程调用，应考虑实现批量功能的接口
