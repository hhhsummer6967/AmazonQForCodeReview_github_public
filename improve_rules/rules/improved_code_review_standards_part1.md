# 代码审核规范

## 1. 总体原则

- **一致性**: 代码应遵循项目既定的编码风格和约定
- **可读性**: 代码应易于理解，命名清晰，结构合理
- **可维护性**: 代码应易于修改和扩展
- **安全性**: 代码应防范常见的安全漏洞
- **性能**: 代码应高效运行，避免不必要的资源消耗
- **模块化**: 代码应适当模块化，保持低耦合高内聚
- **可测试性**: 代码应易于测试，便于验证功能正确性

## 2. 代码审核流程

### 2.1 审核前准备
- 确保了解需求和上下文
- 查看相关文档和设计文档
- 了解项目的编码规范
- 熟悉相关业务领域知识
- 准备代码审核工具和检查清单

### 2.2 审核过程
- 使用代码审核工具进行静态分析
- 进行手动代码审核
- 记录发现的问题和建议
- 与开发者讨论问题和解决方案
- 关注代码而非开发者个人
- 提供具体的改进建议而非模糊的批评

### 2.3 审核后跟进
- 确认问题已修复
- 验证修复不会引入新问题
- 总结经验教训，更新编码规范
- 跟踪常见问题模式，预防未来类似问题

## 3. 审核检查清单

### 3.1 代码风格与格式
- **命名约定**
  - 类和接口使用首字母大写的驼峰命名法（PascalCase）
  - 方法和变量使用小写字母开头的驼峰命名法（camelCase）
  - 常量使用全大写字母和下划线（UPPER_SNAKE_CASE）
  - 包名使用全小写字母
  - 布尔变量名应使用 is/has/can 等前缀
  - 避免使用单字母变量名（除非是循环索引或数学公式）
  - 避免使用缩写（除非是广泛接受的缩写）
  - 名称应当具有描述性，清晰表达其用途

- **格式化**
  - 缩进使用四个空格（或项目约定的缩进方式）
  - 行长度不超过80-120字符（根据项目规范）
  - 代码块使用花括号分隔，即使只有一行
  - 操作符周围有适当的空格
  - 逗号、分号后有空格
  - 代码块之间有空行分隔
  - 文件以空行结尾

- **注释规范**
  - 所有的类都必须添加创建者和创建日期，以及简单的注释描述
  - 方法内部的复杂业务逻辑或者算法，需要添加清楚的注释
  - 一般情况下，注释描述类、方法、变量的作用
  - 任何需要提醒的警告或TODO，也要注释清楚
  - 如果是注释一行代码的，就用//；如果注释代码块或者接口方法的，有多行/* */
  - 一块代码逻辑如果从陌生人角度第一遍看不懂，就需要添加注释

### 3.2 代码质量
- **代码复杂度**
  - 循环嵌套不超过3层
  - 条件语句不过于复杂（考虑提取为单独方法）
  - 避免过长的表达式
  - 将复杂条件提取为命名良好的函数或变量

- **重复代码**
  - 识别并消除重复代码
  - 考虑提取公共方法或使用设计模式
  - 避免复制粘贴代码

- **函数/方法设计**
  - 函数长度合理（通常不超过30-50行）
  - 参数数量合理（通常不超过3-4个，考虑使用对象封装多参数）
  - 函数应当只做一件事（单一职责原则）
  - 避免副作用
  - 返回值一致且有意义

- **代码可测试性**
  - 避免全局状态依赖
  - 使用依赖注入
  - 将副作用与纯逻辑分离
  - 避免硬编码依赖
